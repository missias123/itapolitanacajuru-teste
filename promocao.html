<!DOCTYPE html>
<!--
  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
  â•‘         SORVETERIA ITAPOLITANA CAJURU â€” SITE OFICIAL         â•‘
  â•‘â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•‘
  â•‘  PÃ¡gina: PromoÃ§Ã£o do MÃªs                                     â•‘
  â•‘  VersÃ£o: 5.0 â€” DinÃ¢mica via promo.json (GitHub raw)          â•‘
  â•‘  âœï¸ Para trocar a promoÃ§Ã£o: use o Painel Admin               â•‘
  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-->
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PromoÃ§Ã£o do MÃªs â€“ Itapolitana Cajuru</title>
<meta name="description" content="PromoÃ§Ã£o especial da Sorveteria Itapolitana Cajuru. Confira a oferta do mÃªs!">
<style>
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:'Segoe UI',system-ui,sans-serif;background:#0D0D0D;color:#fff;min-height:100vh;overflow-x:hidden}

/* â”€â”€ HEADER â”€â”€ */
.topo{background:rgba(0,0,0,.95);backdrop-filter:blur(10px);padding:12px 20px;display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:100;border-bottom:2px solid #C62828}
.logo-area{display:flex;align-items:center;gap:10px;text-decoration:none;color:#fff}
.logo-area img{height:48px;width:48px;border-radius:50%;object-fit:cover;box-shadow:0 0 0 2px #C62828,0 0 0 4px #F9A825,0 0 0 6px #0D47A1}
.logo-nome{font-size:15px;font-weight:900;color:#E8000D}
.logo-sub{font-size:11px;color:#aaa}
.btn-voltar{background:linear-gradient(135deg,#F9A825,#FFD600);border:none;color:#1A0A00;border-radius:10px;padding:9px 16px;font-size:13px;font-weight:800;cursor:pointer;text-decoration:none;display:inline-flex;align-items:center;gap:6px}

/* â”€â”€ FOTO â”€â”€ */
.foto-container{width:100%;background:#111;position:relative;overflow:hidden}
.foto-container img{width:100%;aspect-ratio:1200/630;object-fit:cover;display:block;background:#111;loading:lazy}
.foto-badge{position:absolute;top:14px;left:14px;background:linear-gradient(135deg,#E8000D,#FF6B35);color:#fff;font-size:12px;font-weight:900;padding:6px 14px;border-radius:20px;letter-spacing:.5px;animation:pulse 2s infinite}
@keyframes pulse{0%,100%{box-shadow:0 0 0 0 rgba(232,0,13,.5)}50%{box-shadow:0 0 0 10px rgba(232,0,13,0)}}

/* â”€â”€ CORPO â”€â”€ */
.corpo{max-width:680px;margin:0 auto;padding:28px 20px 56px}
.promo-titulo{font-size:clamp(24px,6vw,42px);font-weight:900;line-height:1.15;color:#fff;margin-bottom:14px;word-break:break-word}
.promo-desc{font-size:clamp(14px,3.5vw,18px);line-height:1.7;color:rgba(255,255,255,.85);background:rgba(255,255,255,.07);border-left:4px solid #C62828;border-radius:0 10px 10px 0;padding:16px 20px;margin-bottom:24px;word-break:break-word}

/* â”€â”€ RELÃ“GIO REGRESSIVO â”€â”€ */
.cd-section{background:linear-gradient(135deg,#1A0A00,#3E1A00);border-radius:14px;padding:24px 16px;text-align:center;margin-bottom:24px;border:1px solid rgba(255,213,79,.2)}
.cd-lbl{font-size:12px;color:rgba(255,213,79,.8);font-weight:700;text-transform:uppercase;letter-spacing:2px;margin-bottom:16px}
.cd-row{display:flex;justify-content:center;gap:clamp(6px,2.5vw,16px)}
.cd-box{background:rgba(0,0,0,.5);border:2px solid rgba(255,213,79,.35);border-radius:12px;padding:clamp(10px,2.5vw,18px) clamp(10px,2.5vw,22px);min-width:clamp(60px,15vw,88px)}
.cd-num{font-size:clamp(30px,9vw,56px);font-weight:900;color:#FFF176;line-height:1;font-variant-numeric:tabular-nums}
.cd-unit{font-size:clamp(9px,2vw,11px);color:rgba(255,213,79,.7);font-weight:700;text-transform:uppercase;letter-spacing:1px;margin-top:4px}
.cd-encerrado{font-size:clamp(16px,4.5vw,24px);font-weight:900;color:#EF4444;display:none;padding:10px}

/* â”€â”€ BOTÃ•ES â”€â”€ */
.promo-links{display:flex;flex-direction:column;gap:12px;margin-bottom:28px}
.promo-btn{display:flex;align-items:center;justify-content:center;gap:10px;padding:17px 24px;border-radius:14px;font-size:clamp(14px,3.8vw,17px);font-weight:800;text-decoration:none;border:none;cursor:pointer;transition:transform .15s,box-shadow .15s;width:100%}
.promo-btn:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(0,0,0,.4)}
.btn-principal{background:linear-gradient(135deg,#FFD600,#FF8F00);color:#1A0A00}
.btn-wpp{background:linear-gradient(135deg,#25D366,#128C7E);color:#fff}
.btn-regulamento{background:rgba(255,255,255,.1);border:1.5px solid rgba(255,255,255,.3)!important;color:#fff}
.btn-encomenda{background:linear-gradient(135deg,#1565C0,#0D47A1);color:#fff}

/* â”€â”€ COMPARTILHAR â”€â”€ */
.share-section{text-align:center;padding:20px 0 0;border-top:1px solid rgba(255,255,255,.15)}
.share-lbl{font-size:12px;color:#9CA3AF;margin-bottom:12px;font-weight:600;text-transform:uppercase;letter-spacing:1px}
.share-btns{display:flex;justify-content:center;gap:10px;flex-wrap:wrap}
.share-btn{background:rgba(255,255,255,.1);border:1.5px solid rgba(255,255,255,.3);color:#fff;border-radius:10px;padding:10px 18px;font-size:13px;font-weight:700;cursor:pointer;text-decoration:none;display:inline-flex;align-items:center;gap:6px}
.share-btn:hover{background:rgba(255,255,255,.2)}

/* â”€â”€ MODAL REGULAMENTO â”€â”€ */
.modal-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.75);z-index:9999;align-items:flex-end;justify-content:center}
.modal-overlay.aberto{display:flex}
.modal-box{background:#1A1A1A;border-radius:20px 20px 0 0;padding:28px 24px 40px;width:100%;max-width:680px;max-height:85vh;overflow-y:auto;position:relative;border-top:3px solid #C62828}
.modal-titulo{font-size:18px;font-weight:900;color:#fff;margin-bottom:16px;padding-right:36px}
.modal-close{position:absolute;top:20px;right:20px;background:rgba(255,255,255,.15);border:none;color:#fff;border-radius:50%;width:32px;height:32px;font-size:16px;font-weight:900;cursor:pointer;display:flex;align-items:center;justify-content:center}
.modal-close:hover{background:rgba(255,255,255,.25)}
.modal-texto{font-size:14px;line-height:1.8;color:rgba(255,255,255,.85);white-space:pre-wrap;word-break:break-word}

/* â”€â”€ FOOTER â”€â”€ */
footer{background:#111;border-top:1px solid rgba(255,255,255,.1);padding:20px;text-align:center;font-size:12px;color:#9CA3AF;line-height:1.8}
footer strong{color:#fff}

/* â”€â”€ LOADING â”€â”€ */
.loading{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:60vh;gap:16px;color:#9CA3AF}
.loading-spin{width:40px;height:40px;border:4px solid rgba(255,255,255,.1);border-top-color:#C62828;border-radius:50%;animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}

/* â”€â”€ SEM PROMOÃ‡ÃƒO â”€â”€ */
.estado-vazio{display:none;flex-direction:column;align-items:center;justify-content:center;min-height:60vh;gap:20px;padding:40px 20px;text-align:center}
.estado-vazio .icone{font-size:72px;opacity:.6}

/* â”€â”€ ANIMAÃ‡Ã•ES â”€â”€ */
@keyframes fadeUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
.fade1{animation:fadeUp .45s ease both}
.fade2{animation:fadeUp .45s .1s ease both}
.fade3{animation:fadeUp .45s .2s ease both}

/* â”€â”€ MOBILE â”€â”€ */
@media(max-width:480px){
  .topo{padding:10px 14px}
  .logo-nome{font-size:14px}
  .btn-voltar{padding:7px 12px;font-size:12px}
  .corpo{padding:20px 14px 48px}
  .promo-btn{padding:15px 18px}
  .cd-section{padding:18px 12px}
  .modal-box{border-radius:16px 16px 0 0;padding:24px 18px 36px}
}
@media(max-width:360px){
  .cd-box{padding:8px 6px;min-width:52px}
  .cd-num{font-size:26px}
  .cd-row{gap:4px}
}
</style>
</head>
<body>

<header class="topo">
  <a href="index.html" class="logo-area">
    <img src="images/logo.png" alt="Itapolitana" onerror="this.style.display='none'" loading="lazy">
    <div>
      <div class="logo-nome">Itapolitana Cajuru</div>
      <div class="logo-sub">AÃ§aiteria &amp; Sorveteria Â· Desde 2007</div>
    </div>
  </a>
  <a href="index.html" class="btn-voltar">â† Voltar</a>
</header>

<!-- LOADING -->
<div id="estado-loading" class="loading">
  <div class="loading-spin"></div>
  <span>Carregando promoÃ§Ã£o...</span>
</div>

<!-- SEM PROMOÃ‡ÃƒO ATIVA -->
<div id="estado-vazio" class="estado-vazio">
  <div class="icone">ğŸ¦</div>
  <h2 style="font-size:22px;font-weight:900">Nenhuma promoÃ§Ã£o ativa</h2>
  <p style="font-size:14px;color:#9CA3AF;font-weight:600;max-width:300px;line-height:1.6">No momento nÃ£o hÃ¡ promoÃ§Ãµes ativas. Fique de olho nas nossas redes sociais!</p>
  <a href="https://www.instagram.com/sorveteriaitapolitanacajuru" target="_blank" rel="noopener noreferrer" style="display:inline-flex;align-items:center;gap:8px;background:linear-gradient(135deg,#E1306C,#833AB4,#405DE6);color:#fff;border-radius:12px;padding:14px 24px;font-size:15px;font-weight:800;text-decoration:none;margin-top:8px">ğŸ“¸ Ver no Instagram</a>
  <a href="index.html" class="btn-voltar" style="margin-top:8px">â† Voltar ao site</a>
</div>

<!-- CONTEÃšDO DA PROMOÃ‡ÃƒO -->
<div id="conteudo-promo" style="display:none">

  <!-- FOTO -->
  <div class="foto-container fade1" id="foto-container" style="display:none">
    <img id="promo-foto" src="" alt="Foto da PromoÃ§Ã£o" loading="lazy">
    <div class="foto-badge">ğŸ”¥ PromoÃ§Ã£o Ativa</div>
  </div>

  <div class="corpo">
    <h1 class="promo-titulo fade1" id="promo-titulo"></h1>
    <p class="promo-desc fade2" id="promo-desc" style="display:none"></p>

    <!-- RELÃ“GIO REGRESSIVO -->
    <div class="cd-section fade2" id="cd-section" style="display:none">
      <div class="cd-lbl">â³ PromoÃ§Ã£o encerra em</div>
      <div class="cd-row" id="cd-row">
        <div class="cd-box"><div class="cd-num" id="cd-d">00</div><div class="cd-unit">Dias</div></div>
        <div class="cd-box"><div class="cd-num" id="cd-h">00</div><div class="cd-unit">Horas</div></div>
        <div class="cd-box"><div class="cd-num" id="cd-m">00</div><div class="cd-unit">Min</div></div>
        <div class="cd-box"><div class="cd-num" id="cd-s">00</div><div class="cd-unit">Seg</div></div>
      </div>
      <div class="cd-encerrado" id="cd-encerrado">â° PromoÃ§Ã£o Encerrada</div>
    </div>

    <!-- BOTÃ•ES -->
    <div class="promo-links fade3">
      <a class="promo-btn btn-principal" id="btn-principal" href="#" target="_blank" rel="noopener noreferrer">ğŸ“¸ Ver no Instagram</a>
      <!-- BotÃ£o regras do sorteio: sÃ³ aparece se tiver regulamento configurado -->
      <button type="button" class="promo-btn btn-regulamento" id="btn-regulamento" onclick="abrirRegulamento()" style="display:none">ğŸ“‹ Regras do Sorteio</button>
      <a class="promo-btn btn-encomenda" href="encomendas.html">ğŸ“¦ Fazer Encomenda</a>
    </div>

    <!-- COMPARTILHAR -->
    <div class="share-section fade3">
      <div class="share-lbl">Compartilhe essa promoÃ§Ã£o</div>
      <div class="share-btns">
        <a class="share-btn" id="share-wpp" href="#" target="_blank" rel="noopener noreferrer">ğŸ“² WhatsApp</a>
        <button type="button" class="share-btn" onclick="copiarLink()">ğŸ”— Copiar Link</button>
      </div>
    </div>
  </div>
</div>

<!-- MODAL REGULAMENTO -->
<div class="modal-overlay" id="modal-regulamento" onclick="fecharRegulamento(event)">
  <div class="modal-box">
    <div class="modal-titulo">ğŸ“‹ Regulamento da PromoÃ§Ã£o</div>
    <button type="button" class="modal-close" onclick="fecharRegulamento()">âœ•</button>
    <div class="modal-texto" id="modal-regulamento-texto"></div>
  </div>
</div>

<footer>
  <strong>Sorveteria Itapolitana Cajuru</strong><br>
  R. Cel. Manoel Caetano, 311 â€“ PraÃ§a Largo SÃ£o Bento Â· Em frente Ã  Igreja SÃ£o Bento Â· Cajuru Â· SP<br>
  (16) 99147-2045<br><br>
  <strong>Desenvolvido por SgtMissiasCaÃ§aRato</strong>
</footer>

<script>
// â”€â”€ URL DO JSON DE PROMOÃ‡ÃƒO (GitHub raw) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
var PROMO_JSON_URL = 'https://raw.githubusercontent.com/missias123/itapolitanacajuru/main/dados/promo.json';
var _cdInterval = null;

// â”€â”€ CARREGAR PROMOÃ‡ÃƒO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function carregarPromo() {
  var d = null;

  // 1. Tentar buscar do GitHub raw (sempre fresco)
  try {
    var resp = await fetch(PROMO_JSON_URL + '?t=' + Date.now());
    if (resp.ok) {
      d = await resp.json();
      // Salvar cache local como fallback
      try { localStorage.setItem('itap_promo_cache', JSON.stringify(d)); } catch(e) {}
    }
  } catch(e) {}

  // 2. Fallback: cache local
  if (!d) {
    try { d = JSON.parse(localStorage.getItem('itap_promo_cache') || 'null'); } catch(e) {}
  }

  // 3. Sem dados ou promoÃ§Ã£o inativa
  if (!d || !d.ativo) {
    document.getElementById('estado-loading').style.display = 'none';
    document.getElementById('estado-vazio').style.display = 'flex';
    return;
  }

  // â”€â”€ RENDERIZAR PROMOÃ‡ÃƒO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  document.getElementById('estado-loading').style.display = 'none';

  // TÃ­tulo
  var titulo = d.titulo || 'PromoÃ§Ã£o Especial!';
  document.getElementById('promo-titulo').textContent = titulo;
  document.title = titulo + ' â€“ Itapolitana Cajuru';

  // DescriÃ§Ã£o
  if (d.descricao && d.descricao.trim()) {
    var elDesc = document.getElementById('promo-desc');
    elDesc.textContent = d.descricao;
    elDesc.style.display = 'block';
  }

  // Foto (com lazy loading e fallback silencioso)
  var fotoUrl = d.fotoUrl || d.foto || '';
  if (fotoUrl) {
    var fc = document.getElementById('foto-container');
    var fi = document.getElementById('promo-foto');
    fi.src = fotoUrl;
    fi.alt = titulo;
    fi.onerror = function() { fc.style.display = 'none'; };
    fc.style.display = 'block';
  }

  // BotÃ£o principal
  var btn = document.getElementById('btn-principal');
  btn.textContent = d.btnTexto || 'ğŸ“¸ Ver no Instagram';
  btn.href = d.link || 'https://www.instagram.com/sorveteriaitapolitanacajuru';

  // BotÃ£o regulamento (sÃ³ aparece se tiver texto)
  if (d.regulamento && d.regulamento.trim()) {
    var btnReg = document.getElementById('btn-regulamento');
    btnReg.style.display = 'flex';
    document.getElementById('modal-regulamento-texto').textContent = d.regulamento;
  }

  // Compartilhar via WhatsApp
  var txtShare = encodeURIComponent('ğŸ¦ ' + titulo + ' â€“ Itapolitana Cajuru!\n' + window.location.href);
  document.getElementById('share-wpp').href = 'https://wa.me/?text=' + txtShare;

  // RelÃ³gio regressivo
  if (d.dataFim) {
    var horaFim = d.horaFim || '22:00';
    var fim = new Date(d.dataFim + 'T' + horaFim + ':00-03:00');
    if (!isNaN(fim)) {
      document.getElementById('cd-section').style.display = 'block';
      iniciarRelogio(fim);
    }
  }

  // Mostrar conteÃºdo
  document.getElementById('conteudo-promo').style.display = 'block';
}

// â”€â”€ RELÃ“GIO REGRESSIVO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function iniciarRelogio(fim) {
  function pad(n) { return n < 10 ? '0' + n : '' + n; }
  function tick() {
    var diff = fim - new Date();
    if (diff <= 0) {
      document.getElementById('cd-row').style.display = 'none';
      document.getElementById('cd-encerrado').style.display = 'block';
      if (_cdInterval) clearInterval(_cdInterval);
      return;
    }
    document.getElementById('cd-d').textContent = pad(Math.floor(diff / 86400000));
    document.getElementById('cd-h').textContent = pad(Math.floor((diff % 86400000) / 3600000));
    document.getElementById('cd-m').textContent = pad(Math.floor((diff % 3600000) / 60000));
    document.getElementById('cd-s').textContent = pad(Math.floor((diff % 60000) / 1000));
  }
  tick();
  _cdInterval = setInterval(tick, 1000);
}

// â”€â”€ MODAL REGULAMENTO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function abrirRegulamento() {
  document.getElementById('modal-regulamento').classList.add('aberto');
  document.body.style.overflow = 'hidden';
}
function fecharRegulamento(e) {
  if (e && e.target !== document.getElementById('modal-regulamento')) return;
  document.getElementById('modal-regulamento').classList.remove('aberto');
  document.body.style.overflow = '';
}

// â”€â”€ COMPARTILHAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function copiarLink() {
  navigator.clipboard.writeText(window.location.href)
    .then(function() { alert('Link copiado! ğŸ˜Š'); })
    .catch(function() { prompt('Copie o link:', window.location.href); });
}

// â”€â”€ INICIAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
carregarPromo();
</script>
</body>
</html>
